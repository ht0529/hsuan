<!DOCTYPE html>
<html lang="zh-hant-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Hao" />
    <title>佳萱生日快樂~</title>
    <link rel="shortcut icon" href="./photo/favicon.ico" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@200..900&family=Risque&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    />
    <link rel="stylesheet" href="meet.css" />
  </head>
  <body>
    <main>
      <!-- 撥放音樂 -->
      <img class="cat" src="./photo/cat2.png" alt="Cat Image" id="cat-img" />
      <audio id="bg-music" src="./music/白rap魏民谣 - 他只是经过.opus" loop></audio>

      <section id="group-photo">
        <a href="./d-carousel.html">
          <i
            class="fa-regular fa-hand-point-left fa-4x left"
            style="color: #6a5acd"
          ></i
        ></a>

        <div class="gallery">
          <figure>
            <img
              src="./photo/擷取15.jpg"
              alt="第一次見面"
            />
            <figcaption>第一次見面 <small>2025/02/22</small></figcaption>
          </figure>
          <figure>
            <img
              src="./photo/擷取12.jpg"
              alt="第二次見面"
            />
            <figcaption>第二次見面 <small>2025/02/27</small></figcaption>
          </figure>
          <figure>
            <img src="./photo/擷取10.jpg" alt="第一次合照" />
            <figcaption>第一次合照 <small>2025/02/27</small></figcaption>
          </figure>
          <figure>
            <img
              src="./photo/1040733_0.jpg"
              alt="第三次見面"
            />
            <figcaption>第三次見面 <small>2025/03/09</small></figcaption>
          </figure>
          <figure>
            <img
              src="./photo/1040732_0.jpg"
              alt="妳的租屋處"
            />
            <figcaption>可愛妹子的租屋處 <small>2025/03/09</small></figcaption>
          </figure>
          <figure>
            <img
              src="./photo/1040731_0.jpg"
              alt="妳的租屋處"
            />
            <figcaption>可愛妹子的租屋處 <small>2025/03/09</small></figcaption>
          </figure>
          <figure>
            <img
              src="./photo/1040736_0.jpg"
              alt=""
            />
            <figcaption>可愛妹子在吃飯 - 1 <small>2025/03/09</small></figcaption>
          </figure>
          <figure>
            <img
              src="./photo/1040734_0.jpg"
              alt=""
            />
            <figcaption>
              可愛妹子在吃飯 - 2 <small>2025/03/09</small>
            </figcaption>
          </figure>
          <figure>
            <img
              src="./photo/1040735_0.jpg"
              alt=""
            />
            <figcaption>可愛妹子在吃飯 - 3 <small>2025/03/09</small></figcaption>
          </figure>
        </div>

        <svg
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          style="display: none"
        >
          <symbol id="close" viewBox="0 0 18 18">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              fill="#FFFFFF"
              d="M9,0.493C4.302,0.493,0.493,4.302,0.493,9S4.302,17.507,9,17.507
			S17.507,13.698,17.507,9S13.698,0.493,9,0.493z M12.491,11.491c0.292,0.296,0.292,0.773,0,1.068c-0.293,0.295-0.767,0.295-1.059,0
			l-2.435-2.457L6.564,12.56c-0.292,0.295-0.766,0.295-1.058,0c-0.292-0.295-0.292-0.772,0-1.068L7.94,9.035L5.435,6.507
			c-0.292-0.295-0.292-0.773,0-1.068c0.293-0.295,0.766-0.295,1.059,0l2.504,2.528l2.505-2.528c0.292-0.295,0.767-0.295,1.059,0
			s0.292,0.773,0,1.068l-2.505,2.528L12.491,11.491z"
            />
          </symbol>
        </svg>

        <a href="./envelope.html">
          <i
            class="fa-regular fa-hand-point-right fa-4x right"
            style="color: #6a5acd"
          >
          </i
        ></a>
      </section>
    </main>

    <script>
      // 撥放音樂
      const audio = document.getElementById("bg-music");
      document.getElementById("cat-img").addEventListener("click", function () {
        if (audio.paused) {
          audio.play().catch((error) => console.log("播放失敗:", error));
        } else {
          audio.pause();
        }
      });

      // 動態
      const popup = {
        init: function () {
          document.querySelectorAll("figure").forEach((figure) => {
            figure.addEventListener("click", function () {
              popup.open(this);
            });
          });

          document.addEventListener("click", function (event) {
            if (
              event.target.classList.contains("popup") ||
              event.target.classList.contains("close") ||
              event.target.closest(".close")
            ) {
              popup.close();
            }
          });
          document.addEventListener("keydown", function (event) {
            if (event.key === "Escape") {
              popup.close();
            }
          });
        },

        open: function (figure) {
          document.querySelector(".gallery").classList.add("pop");

          const popupDiv = document.createElement("div");
          popupDiv.classList.add("popup");
          document.body.appendChild(popupDiv);

          const clonedFig = figure.cloneNode(true);
          popupDiv.appendChild(clonedFig);

          const bgDiv = document.createElement("div");
          bgDiv.classList.add("bg");
          popupDiv.appendChild(bgDiv);

          const closeDiv = document.createElement("div");
          closeDiv.classList.add("close");
          closeDiv.innerHTML = '<svg><use xlink:href="#close"></use></svg>';
          clonedFig.appendChild(closeDiv);

          const shadowDiv = document.createElement("div");
          shadowDiv.classList.add("shadow");
          clonedFig.appendChild(shadowDiv);

          const imgSrc = clonedFig.querySelector("img").getAttribute("src");
          shadowDiv.style.backgroundImage = `url(${imgSrc})`;
          bgDiv.style.backgroundImage = `url(${imgSrc})`;

          setTimeout(() => {
            popupDiv.classList.add("pop");
          }, 10);
        },

        close: function () {
          document.querySelector(".gallery").classList.remove("pop");
          const popupDiv = document.querySelector(".popup");
          if (popupDiv) {
            popupDiv.classList.remove("pop");
            setTimeout(() => {
              if (popupDiv) popupDiv.remove();
            }, 100);
          }
        },
      };

      popup.init();
    </script>
  </body>
</html>
